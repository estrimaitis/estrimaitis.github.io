<!DOCTYPE html>
<html>
<head>
    <title>Equity curve simulator</title>
    <!-- Include Google Fonts link for Open Sans -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap">
    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Style for the body to use Open Sans */
        body {
            font-family: 'Open Sans', sans-serif;
            padding: 15px;
            background-color: #333; /* Dark background color */
            color: #fff; /* Light text color */
        }

        /* Style for custom buttons */
        .custom-button {
            background-color: #90d093 !important;
            color: #fff !important; /* Light text color */
            border: none !important;
            border-radius: 5px !important;
            padding: 10px 20px !important;
            font-size: 16px !important;
            cursor: pointer !important;
        }

        .custom-button.loss {
            background-color: #d09090 !important;
        }

        .custom-button.reset {
            background-color: gray !important;
        }

        /* Style for the chart container */
        #chartContainer {
            margin-top: 30px;
            width: 100%;
            background-color: #444 !important; /* Dark background color for the chart container */
            border-radius: 5px !important;
            padding: 10px !important;
        }

        /* Style for the total span */
        #total {
            font-size: 24px !important; /* Larger font size for total */
        }

        /* Style for the chart line color */
        .chart-line {
            border-color: #90d093 !important; /* Line color */
        }

        /* Style for the chart grid lines */
        .chart-grid {
            color: #555 !important; /* Grid lines color */
        }

        /* Style for the chart labels */
        .chart-labels {
            color: #ccc !important; /* Label text color */
        }
    </style>
</head>
<body>
    <h1>Equity curve simulator</h1>
    <p>Total Sum: <span id="total">0</span></p>
    <button id="winButton" class="custom-button">Win</button>
    <button id="lossButton" class="custom-button loss">Loss</button>
    <button id="resetButton" class="custom-button reset">Reset</button>
    <div id="chartContainer"> <!-- Chart container -->
        <canvas id="lineChart" height="400"></canvas>
    </div>

    <script>
        // Get references to the buttons, total span, and chart canvas
        const winButton = document.getElementById("winButton");
        const lossButton = document.getElementById("lossButton");
        const resetButton = document.getElementById("resetButton");
        const totalSpan = document.getElementById("total");
        const lineChartCanvas = document.getElementById("lineChart").getContext("2d");

        // Initialize the total sum and an array to store the sum history
        let total = 0;
        let trades = 0;
        let sumHistory = [];
        totalSpan.textContent = total;

        // Create an initial empty chart with responsive width
        let lineChart = new Chart(lineChartCanvas, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Total Sum',
                    data: [],
                    borderColor: 'blue',
                    fill: false,
                    pointRadius: 0, // Hide data points
                    spanGaps: true
                }]
            },
            options: {
                responsive: true, // Enable chart responsiveness
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Trades'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Total Sum'
                        }
                    }
                }
            }
        });

        // Function to update the line chart
        function updateLineChart() {
            sumHistory.push(total);
            if (sumHistory.length > 10) {
                sumHistory.shift(); // Remove the oldest data point
            }
            lineChart.data.labels = Array.from({ length: sumHistory.length }, (_, i) => `Trade ${i + 1}`);
            lineChart.data.datasets[0].data = sumHistory;
            lineChart.update();
        }

        // Add 1 to the total and update the line chart when the "Win" button is clicked
        winButton.addEventListener("click", function() {
            total++;
            trades++;
            totalSpan.textContent = total;
            updateLineChart();
        });

        // Subtract 1 from the total and update the line chart when the "Loss" button is clicked
        lossButton.addEventListener("click", function() {
            total--;
            trades++;
            totalSpan.textContent = total;
            updateLineChart();
        });

        // Reset the total and the line chart to the initial state when the "Reset" button is clicked
        resetButton.addEventListener("click", function() {
            total = 0;
            trades = 0;
            totalSpan.textContent = total;
            sumHistory = [];
            lineChart.data.labels = [];
            lineChart.data.datasets[0].data = [];
            lineChart.update();
        });
    </script>
</body>
</html>
